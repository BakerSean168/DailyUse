# DailyUse 环境配置示例
# =============================================================================
# 复制此文件并重命名为 .env.local（开发）或 .env.production.local（生产）
# 
# 文件加载优先级（后覆盖前）：
#   .env → .env.{NODE_ENV} → .env.local → .env.{NODE_ENV}.local
#
# .gitignore 规则：
#   ✅ 可提交: .env, .env.development, .env.production, .env.example
#   ❌ 忽略:   .env.local, .env.*.local, .env.prod (包含敏感信息)
# =============================================================================

# =============================================================================
# 应用基础配置
# =============================================================================
NODE_ENV=development
API_PORT=3000
API_HOST=0.0.0.0
LOG_LEVEL=debug
TZ=Asia/Shanghai

# =============================================================================
# 数据库配置 (PostgreSQL)
# =============================================================================
# 推荐：使用分解配置（Docker 最佳实践）✅
# 
# 原因：
#   - Docker Compose 中可以轻松使用变量替换
#   - PostgreSQL 和 API 容器可以共用这些变量
#   - 密码包含特殊字符时无需 URL 编码
#   - 更易于管理和调试
#
# 应用会自动拼接成：
#   postgresql://${DB_USER}:${DB_PASSWORD}@${DB_HOST}:${DB_PORT}/${DB_NAME}
# =============================================================================

# ✅ 分解配置（推荐）
DB_HOST=localhost
DB_PORT=5432
DB_NAME=dailyuse
DB_USER=dailyuse
DB_PASSWORD=your-password

# ⚠️ 仅在特殊情况下使用完整字符串（不推荐）
# DATABASE_URL=postgresql://dailyuse:your-password@localhost:5432/dailyuse?schema=public

# =============================================================================
# Redis 缓存配置
# =============================================================================
# 方式1: 完整连接字符串
# REDIS_URL=redis://:your-password@localhost:6379/0

# 方式2: 分解配置
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# =============================================================================
# JWT 认证配置
# =============================================================================
# ⚠️ 生产环境必须使用强随机密钥！
# 生成命令: openssl rand -base64 64
JWT_SECRET=dev-jwt-secret-change-me-in-production-at-least-32-chars
JWT_EXPIRES_IN=7d
JWT_REFRESH_EXPIRES_IN=30d

# 可选：单独的刷新 Token 密钥
# REFRESH_TOKEN_SECRET=your-refresh-token-secret

# =============================================================================
# CORS 跨域配置
# =============================================================================
# 多个来源用逗号分隔，* 表示允许所有（不推荐生产环境）
CORS_ORIGIN=http://localhost:5173,http://localhost:5174,http://127.0.0.1:5173

# =============================================================================
# AI 服务配置（可选）
# =============================================================================
# OpenAI
# OPENAI_API_KEY=sk-your-api-key
# OPENAI_MODEL=gpt-4-turbo-preview
# OPENAI_BASE_URL=https://api.openai.com/v1

# 七牛云 AI
# QI_NIU_YUN_API_KEY=your-key
# QI_NIU_YUN_BASE_URL=https://ai.qiniuapi.com
# QI_NIU_YUN_MODEL_ID=your-model-id

# AI Provider 加密密钥（32字节）
# AI_PROVIDER_ENCRYPTION_KEY=12345678901234567890123456789012

# =============================================================================
# 邮件服务配置（可选）
# =============================================================================
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASS=your-app-password
# SMTP_FROM=DailyUse <noreply@dailyuse.com>

# =============================================================================
# 文件上传配置
# =============================================================================
UPLOAD_MAX_SIZE=10485760  # 10MB

# =============================================================================
# 监控配置（可选）
# =============================================================================
# SENTRY_DSN=https://xxxxx@sentry.io/xxxxx

# =============================================================================
# 功能开关
# =============================================================================
ENABLE_DAILY_ANALYSIS=true
USE_PRIORITY_QUEUE_SCHEDULER=true

# =============================================================================
# 构建信息（CI 自动注入，无需手动设置）
# =============================================================================
# BUILD_TIMESTAMP=2025-12-22T00:00:00Z
# GIT_COMMIT=abc1234

# ========== 日志配置 ==========
LOG_LEVEL=info
# LOG_FILE=/var/log/dailyuse/app.log

# ========== 其他配置 ==========
# 应用名称
APP_NAME=DailyUse

# 应用版本
APP_VERSION=0.1.0

# ========== Web 前端配置 ==========
# API 基础 URL（生产环境使用相对路径，由 Nginx 代理）
VITE_API_BASE_URL=/api/v1
VITE_API_URL=

# 应用域名（生产环境）
APP_DOMAIN=dailyuse.bakersean.top
API_DOMAIN=api.dailyuse.bakersean.top

# 时区
TZ=Asia/Shanghai

# 允许的 CORS 来源
# CORS_ORIGIN=http://localhost,http://localhost:3000,https://yourdomain.com
