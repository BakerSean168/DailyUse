# KeyResult DetailView 测试清单

## 🧪 单元功能测试

### 1. 页面导航测试
- [ ] **从 Goal 列表导航**
  - 打开 Goal 列表
  - 点击某个 Goal 的 KeyResultCard
  - 验证能成功跳转到 KeyResultDetailView
  - 验证 URL 为 `/goals/:goalUuid/key-results/:keyResultUuid`

- [ ] **直接 URL 访问**
  - 直接访问 `/goals/:goalUuid/key-results/:keyResultUuid`
  - 验证页面正确加载
  - 验证能正确显示对应的 KeyResult

- [ ] **返回上一页**
  - 点击左上角的返回箭头
  - 验证能返回到 Goal 列表

### 2. 数据加载测试
- [ ] **首次加载**
  - 进入页面时显示加载状态（VProgressLinear）
  - 加载完成后隐藏加载状态
  - 正确显示 KeyResult 信息

- [ ] **缺失数据处理**
  - 测试访问不存在的 KeyResult UUID
  - 验证显示警告对话框
  - 验证自动返回到 Goal 列表

- [ ] **加载失败处理**
  - 如果网络出错
  - 验证显示错误信息和重试按钮
  - 点击重试按钮能重新加载

### 3. KeyResult 信息显示测试
- [ ] **进度显示**
  - 验证当前值和目标值显示正确
  - 验证进度条显示位置正确
  - 验证完成度百分比计算正确

- [ ] **元数据显示**
  - 验证权重（weight）显示正确
  - 验证聚合方式（aggregationMethod）显示正确
  - 验证值类型（valueType）显示正确
  - 验证所属 Goal 信息显示正确

- [ ] **主题颜色**
  - 验证使用了 Goal 的原色作为主题色
  - 验证进度条、Chip 等都使用了主题色

### 4. 记录列表测试
- [ ] **记录列表加载**
  - 进入页面时自动加载记录
  - 验证记录数量显示正确
  - 验证记录按时间倒序排列（最新的在上）

- [ ] **记录显示**
  - 验证前值 → 后值 显示格式
  - 验证变化量（changeAmount）显示正确
  - 验证变化量的颜色
    - 正数应为绿色 (+ 图标)
    - 负数应为红色 (- 图标)
  - 验证时间戳显示格式为 `YYYY-MM-DD` 中文格式
  - 验证备注（remark）正确显示

- [ ] **空状态处理**
  - 如果没有任何记录
  - 验证显示空状态图标和提示文本
  - 验证有"添加记录"的快速操作按钮

- [ ] **滚动表现**
  - 如果有多条记录
  - 验证列表可以滚动
  - 验证滚动条样式符合设计

### 5. 添加记录功能测试
- [ ] **打开对话框**
  - 点击"+ 添加记录"按钮
  - 验证 GoalRecordDialog 弹出
  - 验证对话框的表单字段正确

- [ ] **填写表单**
  - 输入前值（previousValue）
  - 输入后值（currentValue）
  - 输入备注（remark）- 可选
  - 验证表单验证正常

- [ ] **提交新记录**
  - 填写完成后点击提交
  - 验证显示加载状态
  - 验证成功后显示 Snackbar 提示
  - 验证新记录立即出现在列表顶部
  - 验证进度值更新

- [ ] **新增后的自动刷新**
  - 验证新记录添加后
  - 自动从 API 重新加载记录（800ms 延迟）
  - 验证列表数据正确更新

### 6. 删除记录功能测试
- [ ] **删除操作**
  - 在某条记录上找到删除按钮/菜单
  - 点击删除选项
  - 验证显示确认对话框或直接删除
  - 验证显示加载状态

- [ ] **删除成功**
  - 验证显示成功 Snackbar
  - 验证记录从列表中消失
  - 验证进度值更新
  - 验证记录数量减少

- [ ] **删除失败处理**
  - 模拟网络错误
  - 验证显示错误提示
  - 验证记录不被删除

### 7. 响应式设计测试
- [ ] **桌面 (>1200px)**
  - 验证两列布局（信息卡片和记录列表并排）
  - 验证所有内容可见，无需滚动

- [ ] **平板 (600-1200px)**
  - 验证布局调整为适应屏幕
  - 验证内容不会超出屏幕边界

- [ ] **手机 (<600px)**
  - 验证单列布局
  - 验证按钮大小适合触摸
  - 验证字体大小可读性

### 8. 集成测试
- [ ] **完整流程**
  1. 打开 Goal 列表
  2. 点击一个 Goal 的 KeyResultCard
  3. 验证导航到详情页
  4. 验证加载 KeyResult 信息和记录
  5. 点击添加记录
  6. 填写表单并提交
  7. 验证新记录出现
  8. 尝试删除一条记录
  9. 验证删除成功
  10. 返回 Goal 列表
  11. 验证 KeyResult 仍然显示正确的值

- [ ] **KeyResult 值同步**
  - 在详情页添加记录
  - 返回 Goal 列表
  - 验证 KeyResultCard 上的值已更新

## 🔍 边界情况测试

### 1. 数据边界
- [ ] 测试非常大的数字（999999999）
- [ ] 测试负数
- [ ] 测试零值
- [ ] 测试小数
- [ ] 测试非常长的备注文本

### 2. 错误场景
- [ ] 网络连接中断
- [ ] API 返回 404
- [ ] API 返回 500
- [ ] 数据格式不正确
- [ ] UUID 格式不正确

### 3. 性能测试
- [ ] 加载包含 100+ 条记录的 KeyResult
- [ ] 验证滚动性能流畅
- [ ] 验证内存占用合理

## 📊 性能基准

| 操作 | 预期时间 |
|------|---------|
| 页面初始加载 | < 1s |
| 记录列表加载 | < 500ms |
| 添加记录 | < 2s |
| 删除记录 | < 1s |
| 列表滚动 | 60fps |

## 🐛 已知问题和限制

- [ ] 编辑 KeyResult 功能尚未实现
- [ ] 删除 KeyResult 功能尚未实现
- [ ] 批量操作功能尚未实现
- [ ] 记录导出功能尚未实现
- [ ] 记录筛选/排序功能尚未实现

## 📋 测试结果记录

### 测试环境
- 浏览器：
- 操作系统：
- 网络状态：

### 测试日期
- 开始时间：
- 完成时间：
- 测试人员：

### 通过/失败统计
- 总测试项：
- 通过：
- 失败：
- 跳过：

### 问题报告
```
【问题 #1】
标题：
描述：
复现步骤：
期望行为：
实际行为：
优先级：P1/P2/P3
```

