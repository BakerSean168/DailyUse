---
tags:
  - architecture
  - schedule
  - design
description: Schedule æ¨¡å—æ¶æ„è®¾è®¡åˆ†æ
created: 2025-01-01
updated: 2025-01-01
---

# Schedule æ¨¡å—æ¶æ„

> ğŸ—ï¸ Schedule æ¨¡å—çš„æ•´ä½“æ¶æ„è®¾è®¡

## æ¦‚è¿°

Schedule æ¨¡å—é‡‡ç”¨åˆ†å±‚æ¶æ„ï¼Œéµå¾ª DDD è®¾è®¡åŸåˆ™ï¼Œç®¡ç†ä¸¤ç§æ ¸å¿ƒæ•°æ®æ¨¡å‹ï¼šæ—¥ç¨‹äº‹ä»¶ (Schedule Event) å’Œè°ƒåº¦ä»»åŠ¡ (Schedule Task)ã€‚

## æ¶æ„å±‚æ¬¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Presentation Layer                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚   Views     â”‚  â”‚  Components â”‚  â”‚    Hooks    â”‚              â”‚
â”‚  â”‚ ScheduleViewâ”‚  â”‚ Calendar    â”‚  â”‚ useSchedule â”‚              â”‚
â”‚  â”‚ WeekView    â”‚  â”‚ EventList   â”‚  â”‚             â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                            â”‚                                     â”‚
â”‚                            â–¼                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                     Zustand Store                         â”‚   â”‚
â”‚  â”‚  scheduleStore.ts  (ScheduleClientDTO / Entity)           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Application Layer                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ScheduleEvent    â”‚  â”‚ScheduleTask     â”‚  â”‚ScheduleConflict â”‚  â”‚
â”‚  â”‚ApplicationServiceâ”‚  â”‚ApplicationServiceâ”‚  â”‚ApplicationServiceâ”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Infrastructure Layer                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ IPC Client      â”‚  â”‚  API Client     â”‚  â”‚  Container      â”‚  â”‚
â”‚  â”‚ (Desktop)       â”‚  â”‚  (Web)          â”‚  â”‚  (DI)           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       Domain Layer                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Aggregates     â”‚  â”‚   Entities      â”‚  â”‚  Value Objects  â”‚  â”‚
â”‚  â”‚  ScheduleTask   â”‚  â”‚ ScheduleExecutionâ”‚ â”‚  ScheduleConfig â”‚  â”‚
â”‚  â”‚  (âš ï¸ ç¼º Schedule)â”‚  â”‚                 â”‚  â”‚  RetryPolicy    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Contracts Layer                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  DTOs           â”‚  â”‚    Enums        â”‚  â”‚  API Requests   â”‚  â”‚
â”‚  â”‚  Client/Server  â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ•°æ®æµ

### è¯»å–æµç¨‹

```
User Action
    â”‚
    â–¼
Hook (useSchedule)
    â”‚ è°ƒç”¨
    â–¼
ApplicationService
    â”‚ è°ƒç”¨
    â–¼
IPC/API Client
    â”‚ è¯·æ±‚
    â–¼
Backend/Main Process
    â”‚ è¿”å› DTO
    â–¼
ApplicationService
    â”‚ DTO â†’ Entity (å¦‚æœæœ‰)
    â–¼
Hook
    â”‚ æ›´æ–° Store
    â–¼
Store (Zustand)
    â”‚ è§¦å‘é‡æ¸²æŸ“
    â–¼
Component
```

### å†™å…¥æµç¨‹

```
User Action
    â”‚
    â–¼
Component
    â”‚ è°ƒç”¨ Store action
    â–¼
Store (é€šè¿‡ ApplicationService)
    â”‚ è°ƒç”¨ API
    â–¼
ApplicationService
    â”‚ å‘é€è¯·æ±‚
    â–¼
IPC/API Client
    â”‚ è¯·æ±‚
    â–¼
Backend/Main Process
    â”‚ è¿”å› DTO
    â–¼
Store
    â”‚ æ›´æ–°æœ¬åœ°çŠ¶æ€
    â–¼
Component (é‡æ¸²æŸ“)
```

## åŒ…ç»“æ„

### contracts

å®šä¹‰æ‰€æœ‰æ¥å£å’Œç±»å‹ï¼š

```
packages/contracts/src/modules/schedule/
â”œâ”€â”€ aggregates/
â”‚   â”œâ”€â”€ ScheduleClient.ts       # æ—¥ç¨‹äº‹ä»¶ DTO
â”‚   â”œâ”€â”€ ScheduleServer.ts
â”‚   â”œâ”€â”€ ScheduleTaskClient.ts   # è°ƒåº¦ä»»åŠ¡ DTO
â”‚   â”œâ”€â”€ ScheduleTaskServer.ts
â”‚   â”œâ”€â”€ ScheduleStatisticsClient.ts
â”‚   â””â”€â”€ ScheduleStatisticsServer.ts
â”œâ”€â”€ entities/
â”‚   â”œâ”€â”€ ScheduleExecutionClient.ts
â”‚   â””â”€â”€ ScheduleExecutionServer.ts
â”œâ”€â”€ value-objects/
â”‚   â”œâ”€â”€ ScheduleConfig.ts
â”‚   â”œâ”€â”€ ExecutionInfo.ts
â”‚   â”œâ”€â”€ RetryPolicy.ts
â”‚   â”œâ”€â”€ TaskMetadata.ts
â”‚   â”œâ”€â”€ ConflictDetectionResult.ts
â”‚   â””â”€â”€ ModuleStatistics.ts
â”œâ”€â”€ enums.ts
â”œâ”€â”€ api-requests.ts
â””â”€â”€ index.ts
```

### domain-client

å®ç°å®¢æˆ·ç«¯é¢†åŸŸæ¨¡å‹ï¼š

```
packages/domain-client/src/schedule/
â”œâ”€â”€ aggregates/
â”‚   â”œâ”€â”€ ScheduleTask.ts    âœ… å·²å®ç°
â”‚   â””â”€â”€ Schedule.ts        âŒ ç¼ºå¤±
â”œâ”€â”€ entities/
â”‚   â””â”€â”€ index.ts           (ç©º)
â”œâ”€â”€ value-objects/
â”‚   â”œâ”€â”€ ScheduleConfig.ts
â”‚   â”œâ”€â”€ ExecutionInfo.ts
â”‚   â”œâ”€â”€ RetryPolicy.ts
â”‚   â””â”€â”€ TaskMetadata.ts
â””â”€â”€ index.ts
```

### application-client

å®ç°åº”ç”¨æœåŠ¡ï¼š

```
packages/application-client/src/schedule/
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ ScheduleEventApplicationService.ts
â”‚   â”œâ”€â”€ ScheduleTaskApplicationService.ts
â”‚   â”œâ”€â”€ ScheduleConflictApplicationService.ts
â”‚   â”œâ”€â”€ create-schedule-event.ts
â”‚   â”œâ”€â”€ create-schedule-task.ts
â”‚   â”œâ”€â”€ ... (34 ä¸ªæœåŠ¡æ–‡ä»¶)
â”‚   â””â”€â”€ index.ts
â””â”€â”€ index.ts
```

### Desktop æ¨¡å—

```
apps/desktop/src/renderer/modules/schedule/
â”œâ”€â”€ application/
â”‚   â””â”€â”€ services/
â”‚       â””â”€â”€ ScheduleApplicationService.ts
â”œâ”€â”€ infrastructure/
â”‚   â”œâ”€â”€ ipc/
â”‚   â”‚   â””â”€â”€ schedule.ipc-client.ts
â”‚   â””â”€â”€ di/
â”‚       â””â”€â”€ schedule.container.ts
â”œâ”€â”€ presentation/
â”‚   â”œâ”€â”€ stores/
â”‚   â”‚   â””â”€â”€ scheduleStore.ts
â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â””â”€â”€ useSchedule.ts
â”‚   â”œâ”€â”€ views/
â”‚   â”‚   â”œâ”€â”€ ScheduleView.tsx
â”‚   â”‚   â”œâ”€â”€ ScheduleListView.tsx
â”‚   â”‚   â””â”€â”€ ScheduleWeekView.tsx
â”‚   â””â”€â”€ components/
â”‚       â”œâ”€â”€ ScheduleCalendarView.tsx
â”‚       â”œâ”€â”€ ScheduleCard.tsx
â”‚       â”œâ”€â”€ ScheduleCreateDialog.tsx
â”‚       â”œâ”€â”€ ScheduleEditDialog.tsx
â”‚       â”œâ”€â”€ ConflictAlert.tsx
â”‚       â””â”€â”€ WeekViewCalendar.tsx
â””â”€â”€ index.ts
```

## ä¾èµ–å…³ç³»

```
Desktop Presentation
        â”‚
        â–¼
Desktop Application (ScheduleApplicationService)
        â”‚
        â–¼
application-client (Services)
        â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼                      â–¼
infrastructure-client     domain-client
(IPC/API Clients)         (Entities)
        â”‚                      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â–¼
              contracts
              (DTOs, Enums)
```

## è®¾è®¡åŸåˆ™

### 1. åˆ†å±‚éš”ç¦»

- è¡¨ç¤ºå±‚åªä¾èµ– Store å’Œ Hook
- åº”ç”¨å±‚è´Ÿè´£ä¸šåŠ¡ç¼–æ’
- é¢†åŸŸå±‚å°è£…ä¸šåŠ¡è§„åˆ™
- åŸºç¡€è®¾æ–½å±‚å¤„ç†å¤–éƒ¨é€šä¿¡

### 2. ä¾èµ–åè½¬

- é«˜å±‚ä¸ä¾èµ–ä½å±‚å…·ä½“å®ç°
- é€šè¿‡æ¥å£ (contracts) å®šä¹‰ä¾èµ–
- DI Container è´Ÿè´£æ³¨å…¥

### 3. æ•°æ®è½¬æ¢

```typescript
// DTO â†’ Entity
const entity = ScheduleTask.fromClientDTO(dto);

// Entity â†’ DTO
const dto = entity.toClientDTO();
```

### 4. çŠ¶æ€ç®¡ç†

- Zustand Store ç®¡ç† UI çŠ¶æ€
- Store å¯å­˜å‚¨ Entity æˆ– DTO
- ä¼˜å…ˆä½¿ç”¨ Entityï¼ˆå¦‚æœå­˜åœ¨ï¼‰

## ç›¸å…³é“¾æ¥

- [[Current-Issues|å½“å‰é—®é¢˜]] - æ¶æ„é—®é¢˜å’Œå¾…æ”¹è¿›é¡¹
- [[../README|æ¨¡å—æ¦‚è¿°]] - æ¨¡å—æ€»è§ˆ

## ä»£ç ä½ç½®

| å±‚çº§ | è·¯å¾„ |
|------|------|
| contracts | `packages/contracts/src/modules/schedule/` |
| domain-client | `packages/domain-client/src/schedule/` |
| application-client | `packages/application-client/src/schedule/` |
| Desktop | `apps/desktop/src/renderer/modules/schedule/` |
