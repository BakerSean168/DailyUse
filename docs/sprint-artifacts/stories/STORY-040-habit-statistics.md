# STORY-040: ä¹ æƒ¯ç»Ÿè®¡åˆ†æ

## ğŸ“‹ Story æ¦‚è¿°

**Story ID**: STORY-040  
**Epic**: EPIC-008 (Habit Tracking)  
**ä¼˜å…ˆçº§**: P2 (ä»·å€¼å¢å¼º)  
**é¢„ä¼°å·¥æ—¶**: 2 å¤©  
**çŠ¶æ€**: ğŸ“‹ Ready for Dev  
**å‰ç½®ä¾èµ–**: STORY-038 âœ…, STORY-039 âœ…

---

## ğŸ¯ ç”¨æˆ·æ•…äº‹

**ä½œä¸º** DailyUse ç”¨æˆ·  
**æˆ‘å¸Œæœ›** çœ‹åˆ°æ·±åº¦çš„ä¹ æƒ¯ç»Ÿè®¡åˆ†æå’Œè¶‹åŠ¿æ´å¯Ÿ  
**ä»¥ä¾¿äº** äº†è§£æˆ‘çš„ä¹ æƒ¯æ¨¡å¼ï¼Œå‘ç°é—®é¢˜ï¼ŒæŒç»­æ”¹è¿›

---

## ğŸ“‹ éªŒæ”¶æ ‡å‡†

### åŠŸèƒ½éªŒæ”¶ - å®Œæˆç‡è¶‹åŠ¿

- [ ] å‘¨/æœˆ/å­£åº¦/å¹´åº¦å®Œæˆç‡æŠ˜çº¿å›¾
- [ ] å¤šä¸ªä¹ æƒ¯å®Œæˆç‡å¯¹æ¯”
- [ ] è¶‹åŠ¿é¢„æµ‹ï¼ˆåŸºäºå†å²æ•°æ®ï¼‰
- [ ] å¼‚å¸¸ç‚¹æ ‡æ³¨ï¼ˆçªç„¶ä¸‹é™/ä¸Šå‡ï¼‰

### åŠŸèƒ½éªŒæ”¶ - è¡¨ç°åˆ†æ

- [ ] æœ€ä½³è¡¨ç°æ—¥ï¼ˆæ˜ŸæœŸå‡ ï¼‰
- [ ] æœ€å·®è¡¨ç°æ—¥ï¼ˆæ˜ŸæœŸå‡ ï¼‰
- [ ] æœ€ä½³æ—¶æ®µï¼ˆæ—©ä¸Š/ä¸‹åˆ/æ™šä¸Šï¼‰
- [ ] å®Œæˆç‡æœ€é«˜çš„æœˆä»½
- [ ] å®Œæˆç‡æœ€ä½çš„æœˆä»½

### åŠŸèƒ½éªŒæ”¶ - ä¹ æƒ¯å…³è”åˆ†æ

- [ ] ä¸¤ä¸¤ä¹ æƒ¯ç›¸å…³æ€§åˆ†æ
- [ ] å‘ç°ä¹ æƒ¯é“¾ï¼ˆAå®Œæˆæ—¶Bä¹Ÿå®Œæˆçš„æ¦‚ç‡ï¼‰
- [ ] äº’æ–¥ä¹ æƒ¯è¯†åˆ«ï¼ˆAå®Œæˆæ—¶Bä¸å®Œæˆï¼‰
- [ ] ä¹ æƒ¯ç°‡ç¾¤åˆ†æï¼ˆåŒæ—¶å®Œæˆçš„ä¹ æƒ¯ç»„ï¼‰

### åŠŸèƒ½éªŒæ”¶ - æ¨¡å¼è¯†åˆ«

- [ ] è¯†åˆ«å›ºå®šæ¨¡å¼ï¼ˆå¦‚å·¥ä½œæ—¥vså‘¨æœ«ï¼‰
- [ ] è¯†åˆ«å‘¨æœŸæ€§è§„å¾‹ï¼ˆå¦‚æœˆåˆ/æœˆæœ«å·®å¼‚ï¼‰
- [ ] è¯†åˆ«å­£èŠ‚æ€§å˜åŒ–
- [ ] è¯†åˆ«ç‰¹æ®Šäº‹ä»¶å½±å“ï¼ˆå‡æœŸã€å‡ºå·®ç­‰ï¼‰

### åŠŸèƒ½éªŒæ”¶ - æ•°æ®å¯è§†åŒ–

- [ ] æŠ˜çº¿å›¾ï¼šå®Œæˆç‡è¶‹åŠ¿
- [ ] æŸ±çŠ¶å›¾ï¼šæ¯æ—¥/å‘¨/æœˆå®Œæˆæ•°
- [ ] é¥¼å›¾ï¼šä¹ æƒ¯ç±»å‹åˆ†å¸ƒ
- [ ] é›·è¾¾å›¾ï¼šå¤šç»´åº¦ä¹ æƒ¯è¡¨ç°
- [ ] æ•£ç‚¹å›¾ï¼šä¹ æƒ¯ç›¸å…³æ€§
- [ ] æ¡‘åŸºå›¾ï¼šä¹ æƒ¯æµè½¬

### åŠŸèƒ½éªŒæ”¶ - AI æ´å¯Ÿï¼ˆæœªæ¥ï¼‰

- [ ] è‡ªåŠ¨ç”Ÿæˆåˆ†ææŠ¥å‘Š
- [ ] è¯†åˆ«ä¹ æƒ¯å¤±è´¥åŸå› 
- [ ] ç»™å‡ºæ”¹è¿›å»ºè®®
- [ ] é¢„æµ‹æœªæ¥å®Œæˆç‡

### æŠ€æœ¯éªŒæ”¶

- [ ] ç»Ÿè®¡è®¡ç®—å‡†ç¡®ç‡ 100%
- [ ] å›¾è¡¨æ¸²æŸ“æ€§èƒ½ < 300ms
- [ ] æ”¯æŒ 2 å¹´å†å²æ•°æ®åˆ†æ
- [ ] ç›¸å…³æ€§è®¡ç®—ä½¿ç”¨æ ‡å‡†ç®—æ³•

---

## ğŸ”§ æŠ€æœ¯æ–¹æ¡ˆ

### æ•°æ®æ¨¡å‹

```typescript
// packages/domain-client/src/habit/
interface HabitAnalytics {
  habitId: string;
  period: AnalyticsPeriod;
  completionTrend: TrendData;
  performance: PerformanceAnalysis;
  correlations: HabitCorrelation[];
  patterns: RecognizedPattern[];
  insights: Insight[];
}

interface AnalyticsPeriod {
  startDate: Date;
  endDate: Date;
  granularity: 'day' | 'week' | 'month' | 'quarter' | 'year';
}

interface TrendData {
  dataPoints: DataPoint[];
  trendLine: number[];           // çº¿æ€§å›å½’è¶‹åŠ¿
  prediction: number[];          // æœªæ¥é¢„æµ‹
  changeRate: number;            // å˜åŒ–ç‡
  direction: 'up' | 'down' | 'stable';
}

interface DataPoint {
  date: Date;
  value: number;                 // å®Œæˆç‡æˆ–å®Œæˆæ•°
  anomaly?: 'high' | 'low';      // å¼‚å¸¸æ ‡è®°
  note?: string;
}

interface PerformanceAnalysis {
  bestDayOfWeek: { day: number; rate: number };
  worstDayOfWeek: { day: number; rate: number };
  bestMonth: { month: number; rate: number };
  worstMonth: { month: number; rate: number };
  bestTimeOfDay: { period: 'morning' | 'afternoon' | 'evening'; rate: number };
  weekdayVsWeekend: {
    weekday: number;
    weekend: number;
    difference: number;
  };
}

interface HabitCorrelation {
  habitA: string;
  habitB: string;
  correlationCoefficient: number; // -1 to 1
  coOccurrenceRate: number;       // 0 to 1
  type: 'positive' | 'negative' | 'none';
  confidence: number;             // ç½®ä¿¡åº¦
}

interface RecognizedPattern {
  type: 'weekly' | 'monthly' | 'seasonal' | 'event-based';
  description: string;
  confidence: number;
  examples: Date[];
  recommendation?: string;
}

interface Insight {
  id: string;
  type: 'success' | 'warning' | 'suggestion' | 'discovery';
  title: string;
  description: string;
  data?: any;
  actionable: boolean;
  action?: string;
}

interface ComparisonAnalysis {
  habits: string[];
  period: AnalyticsPeriod;
  completionRates: Map<string, number>;
  rankings: HabitRanking[];
  strengths: string[];           // è¡¨ç°æœ€å¥½çš„ä¹ æƒ¯
  weaknesses: string[];          // éœ€è¦æ”¹è¿›çš„ä¹ æƒ¯
}

interface HabitRanking {
  habitId: string;
  rank: number;
  completionRate: number;
  change: number;                // ç›¸æ¯”ä¸ŠæœŸå˜åŒ–
}
```

### æœåŠ¡å±‚

```typescript
// packages/application-client/src/habit/services/HabitAnalyticsService.ts
export class HabitAnalyticsService {
  // è¶‹åŠ¿åˆ†æ
  getCompletionTrend(
    habitId: string,
    period: AnalyticsPeriod
  ): Promise<TrendData>;
  
  predictFutureTrend(
    habitId: string,
    daysAhead: number
  ): Promise<number[]>;
  
  detectAnomalies(
    habitId: string,
    period: AnalyticsPeriod
  ): Promise<DataPoint[]>;
  
  // è¡¨ç°åˆ†æ
  analyzePerformance(
    habitId: string,
    period: AnalyticsPeriod
  ): Promise<PerformanceAnalysis>;
  
  getBestPerformingHabits(
    userId: string,
    limit: number
  ): Promise<HabitRanking[]>;
  
  // ç›¸å…³æ€§åˆ†æ
  calculateCorrelations(
    habitIds: string[]
  ): Promise<HabitCorrelation[]>;
  
  findHabitChains(
    userId: string
  ): Promise<HabitCorrelation[]>;
  
  // æ¨¡å¼è¯†åˆ«
  recognizePatterns(
    habitId: string,
    period: AnalyticsPeriod
  ): Promise<RecognizedPattern[]>;
  
  // æ´å¯Ÿç”Ÿæˆ
  generateInsights(
    habitId: string | 'all',
    period: AnalyticsPeriod
  ): Promise<Insight[]>;
  
  // å¯¹æ¯”åˆ†æ
  compareHabits(
    habitIds: string[],
    period: AnalyticsPeriod
  ): Promise<ComparisonAnalysis>;
  
  // æŠ¥å‘Šç”Ÿæˆ
  generateAnalyticsReport(
    userId: string,
    period: AnalyticsPeriod
  ): Promise<AnalyticsReport>;
}
```

### ç»Ÿè®¡ç®—æ³•

```typescript
// ç›¸å…³æ€§è®¡ç®—ï¼ˆçš®å°”é€Šç›¸å…³ç³»æ•°ï¼‰
class CorrelationCalculator {
  calculatePearson(habitA: number[], habitB: number[]): number {
    const n = habitA.length;
    
    if (n === 0 || n !== habitB.length) return 0;
    
    const meanA = habitA.reduce((a, b) => a + b) / n;
    const meanB = habitB.reduce((a, b) => a + b) / n;
    
    let numerator = 0;
    let denomA = 0;
    let denomB = 0;
    
    for (let i = 0; i < n; i++) {
      const diffA = habitA[i] - meanA;
      const diffB = habitB[i] - meanB;
      
      numerator += diffA * diffB;
      denomA += diffA * diffA;
      denomB += diffB * diffB;
    }
    
    const denominator = Math.sqrt(denomA * denomB);
    
    if (denominator === 0) return 0;
    
    return numerator / denominator;
  }
}

// è¶‹åŠ¿é¢„æµ‹ï¼ˆçº¿æ€§å›å½’ï¼‰
class TrendPredictor {
  linearRegression(data: DataPoint[]): { slope: number; intercept: number } {
    const n = data.length;
    
    if (n === 0) return { slope: 0, intercept: 0 };
    
    let sumX = 0;
    let sumY = 0;
    let sumXY = 0;
    let sumXX = 0;
    
    data.forEach((point, index) => {
      const x = index;
      const y = point.value;
      
      sumX += x;
      sumY += y;
      sumXY += x * y;
      sumXX += x * x;
    });
    
    const slope = (n * sumXY - sumX * sumY) / (n * sumXX - sumX * sumX);
    const intercept = (sumY - slope * sumX) / n;
    
    return { slope, intercept };
  }
  
  predict(regression: { slope: number; intercept: number }, x: number): number {
    return regression.slope * x + regression.intercept;
  }
}

// å¼‚å¸¸æ£€æµ‹ï¼ˆZ-score æ–¹æ³•ï¼‰
class AnomalyDetector {
  detectAnomalies(data: DataPoint[], threshold: number = 2): DataPoint[] {
    const values = data.map(d => d.value);
    const mean = values.reduce((a, b) => a + b) / values.length;
    const stdDev = Math.sqrt(
      values.reduce((sq, n) => sq + Math.pow(n - mean, 2), 0) / values.length
    );
    
    return data.filter(point => {
      const zScore = Math.abs((point.value - mean) / stdDev);
      return zScore > threshold;
    }).map(point => ({
      ...point,
      anomaly: point.value > mean ? 'high' : 'low',
    }));
  }
}

// æ¨¡å¼è¯†åˆ«
class PatternRecognizer {
  recognizeWeeklyPattern(data: DataPoint[]): RecognizedPattern | null {
    // æ£€æŸ¥æ˜¯å¦æœ‰æ˜æ˜¾çš„å‘¨æœŸæ€§ï¼ˆå·¥ä½œæ—¥ vs å‘¨æœ«ï¼‰
    const weekdayRates: number[] = [];
    const weekendRates: number[] = [];
    
    data.forEach(point => {
      const dayOfWeek = point.date.getDay();
      if (dayOfWeek === 0 || dayOfWeek === 6) {
        weekendRates.push(point.value);
      } else {
        weekdayRates.push(point.value);
      }
    });
    
    const weekdayAvg = weekdayRates.reduce((a, b) => a + b, 0) / weekdayRates.length;
    const weekendAvg = weekendRates.reduce((a, b) => a + b, 0) / weekendRates.length;
    
    const difference = Math.abs(weekdayAvg - weekendAvg);
    
    if (difference > 0.2) { // 20% å·®å¼‚
      return {
        type: 'weekly',
        description: weekdayAvg > weekendAvg
          ? 'å·¥ä½œæ—¥è¡¨ç°æ›´å¥½'
          : 'å‘¨æœ«è¡¨ç°æ›´å¥½',
        confidence: Math.min(difference, 1),
        examples: [],
        recommendation: weekdayAvg < weekendAvg
          ? 'å»ºè®®åœ¨å·¥ä½œæ—¥å¢åŠ æé†’æˆ–è°ƒæ•´æ—¶é—´'
          : 'å‘¨æœ«å¯ä»¥é€‚å½“æ”¾æ¾ï¼Œä¿æŒå¹³è¡¡',
      };
    }
    
    return null;
  }
}
```

### UI ç»„ä»¶

#### ç»Ÿè®¡åˆ†æä»ªè¡¨æ¿

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ğŸ“Š ä¹ æƒ¯ç»Ÿè®¡åˆ†æ                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  æ—¶é—´èŒƒå›´: [ æœ€è¿‘ 3 ä¸ªæœˆ â–¼ ]    ä¹ æƒ¯: [ å…¨éƒ¨ â–¼ ]    [ ç”ŸæˆæŠ¥å‘Š ]            â”‚
â”‚                                                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ’¡ AI æ´å¯Ÿ                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ âœ… æˆåŠŸï¼šä½ çš„"æ™¨è·‘"ä¹ æƒ¯åœ¨å·¥ä½œæ—¥è¡¨ç°ä¼˜ç§€ (92%)                         â”‚     â”‚
â”‚  â”‚ âš ï¸  è­¦å‘Šï¼šä½ çš„"é˜…è¯»"ä¹ æƒ¯åœ¨æœ€è¿‘ä¸¤å‘¨ä¸‹é™äº† 15%                          â”‚     â”‚
â”‚  â”‚ ğŸ’¡ å»ºè®®ï¼šè€ƒè™‘å°†"å†¥æƒ³"å’Œ"æ™¨è·‘"è¿æ¥ï¼Œå®ƒä»¬é€šå¸¸ä¸€èµ·å®Œæˆ                  â”‚     â”‚
â”‚  â”‚ ğŸ” å‘ç°ï¼šä½ åœ¨å‘¨äº”çš„ä¹ æƒ¯å®Œæˆç‡æœ€ä½ (68%)                               â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“ˆ å®Œæˆç‡è¶‹åŠ¿                                                               â”‚
â”‚  100% â”ƒ                                 â•±â•²                                   â”‚
â”‚   80% â”ƒ           â•±â•²    â•±â•²    â•±â•²    â•±â•²â•±  â•²                                  â”‚
â”‚   60% â”ƒ      â•±â•²â•±  â•²  â•±  â•²  â•±  â•²â•±â•±      â•²â•±â•²                                 â”‚
â”‚   40% â”ƒ  â•±â•²â•±       â•²â•±    â•²â•±              â•²                                  â”‚
â”‚   20% â”ƒâ•±                                    â•²                                â”‚
â”‚    0% â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”                      â”‚
â”‚       9æœˆ  10æœˆ  11æœˆ  12æœˆ  1æœˆ  2æœˆ  3æœˆ  4æœˆ  5æœˆ                          â”‚
â”‚                                                                              â”‚
â”‚  è¶‹åŠ¿: â†— ä¸Šå‡ 2.5%/æœˆ    é¢„æµ‹: ä¸‹æœˆå®Œæˆç‡ 83%                                â”‚
â”‚                                                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Š è¡¨ç°åˆ†æ                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ æœ€ä½³è¡¨ç°æ—¥              â”‚ æœ€ä½³æ—¶æ®µ                            â”‚           â”‚
â”‚  â”‚ å‘¨äºŒ (87%)              â”‚ æ—©ä¸Š 6-9ç‚¹ (91%)                    â”‚           â”‚
â”‚  â”‚                         â”‚                                     â”‚           â”‚
â”‚  â”‚ æœ€å·®è¡¨ç°æ—¥              â”‚ ä¹ æƒ¯ç±»å‹åˆ†å¸ƒ                        â”‚           â”‚
â”‚  â”‚ å‘¨äº” (68%)              â”‚ å¥åº· 45% â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                     â”‚           â”‚
â”‚  â”‚                         â”‚ å­¦ä¹  30% â–ˆâ–ˆâ–ˆâ–ˆ                       â”‚           â”‚
â”‚  â”‚ å·¥ä½œæ—¥ vs å‘¨æœ«          â”‚ å·¥ä½œ 25% â–ˆâ–ˆâ–ˆ                        â”‚           â”‚
â”‚  â”‚ å·¥ä½œæ—¥: 82% vs å‘¨æœ«: 75%â”‚                                     â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ”— ä¹ æƒ¯å…³è”åˆ†æ                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  æ­£ç›¸å…³ (é€šå¸¸ä¸€èµ·å®Œæˆ):                                            â”‚     â”‚
â”‚  â”‚  â€¢ æ™¨è·‘ â†â†’ å†¥æƒ³ (ç›¸å…³ç³»æ•°: 0.78) ğŸ’ª                                â”‚     â”‚
â”‚  â”‚  â€¢ é˜…è¯» â†â†’ å†™ä½œ (ç›¸å…³ç³»æ•°: 0.65)                                   â”‚     â”‚
â”‚  â”‚                                                                    â”‚     â”‚
â”‚  â”‚  è´Ÿç›¸å…³ (äº’æ–¥):                                                    â”‚     â”‚
â”‚  â”‚  â€¢ åŠ ç­ â†â†’ è¿åŠ¨ (ç›¸å…³ç³»æ•°: -0.42) âš ï¸                              â”‚     â”‚
â”‚  â”‚                                                                    â”‚     â”‚
â”‚  â”‚  å»ºè®®çš„ä¹ æƒ¯é“¾:                                                     â”‚     â”‚
â”‚  â”‚  æ™¨è·‘ â†’ å†¥æƒ³ â†’ å¥åº·æ—©é¤ (å®Œæˆç‡æå‡ 23%)                           â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ¯ ä¹ æƒ¯æ’å                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚ 1. ğŸ† å–æ°´ (95%)        â†— +3%                            â”‚               â”‚
â”‚  â”‚ 2. ğŸ¥ˆ æ™¨è·‘ (92%)        â†— +5%                            â”‚               â”‚
â”‚  â”‚ 3. ğŸ¥‰ é˜…è¯» (85%)        â†˜ -2%                            â”‚               â”‚
â”‚  â”‚ 4.    å†¥æƒ³ (78%)        â†’ æŒå¹³                           â”‚               â”‚
â”‚  â”‚ 5.    å­¦è‹±è¯­ (65%)      â†˜ -8%  âš ï¸ éœ€è¦å…³æ³¨              â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ” è¯†åˆ«çš„æ¨¡å¼                                                               â”‚
â”‚  â€¢ å‘¨æœŸæ€§: æœˆåˆè¡¨ç°æœ€å¥½ (89%)ï¼Œæœˆæœ«ä¸‹é™ (72%)                               â”‚
â”‚  â€¢ å­£èŠ‚æ€§: å¤å­£å®Œæˆç‡é«˜äºå†¬å­£ (+12%)                                         â”‚
â”‚  â€¢ å·¥ä½œæ—¥æ¨¡å¼: å‘¨ä¸€æœ€é«˜ (88%)ï¼Œå‘¨äº”æœ€ä½ (68%)                               â”‚
â”‚  â€¢ ç‰¹æ®Šäº‹ä»¶: å‡æœŸå®Œæˆç‡ä¸‹é™ 35%                                              â”‚
â”‚                                                                              â”‚
â”‚  [ æŸ¥çœ‹è¯¦ç»†æŠ¥å‘Š ]  [ å¯¼å‡ºæ•°æ® ]  [ AI æ·±åº¦åˆ†æ ]                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ä¹ æƒ¯å¯¹æ¯”é›·è¾¾å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          ğŸ“Š ä¹ æƒ¯å¤šç»´å¯¹æ¯” - é›·è¾¾å›¾                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                      â”‚
â”‚                    å®Œæˆç‡                            â”‚
â”‚                      /\                              â”‚
â”‚                     /  \                             â”‚
â”‚                    /    \                            â”‚
â”‚          è¿ç»­æ€§   /      \  ç¨³å®šæ€§                   â”‚
â”‚                  /        \                          â”‚
â”‚                 /    ğŸŸ¢    \                         â”‚
â”‚                /   æ™¨è·‘     \                        â”‚
â”‚               /      ğŸ”µ      \                       â”‚
â”‚              /     é˜…è¯»       \                      â”‚
â”‚             /__________________\                     â”‚
â”‚                                                      â”‚
â”‚        éš¾åº¦ç­‰çº§              æ—¶é•¿æŠ•å…¥                â”‚
â”‚                                                      â”‚
â”‚  å›¾ä¾‹: ğŸŸ¢ æ™¨è·‘  ğŸ”µ é˜…è¯»  ğŸŸ¡ å†¥æƒ³                     â”‚
â”‚                                                      â”‚
â”‚  æ´å¯Ÿ:                                               â”‚
â”‚  â€¢ "æ™¨è·‘"åœ¨å®Œæˆç‡å’Œè¿ç»­æ€§ä¸Šè¡¨ç°æœ€å¥½                 â”‚
â”‚  â€¢ "é˜…è¯»"ç¨³å®šæ€§é«˜ï¼Œä½†æ—¶é•¿æŠ•å…¥å¯ä»¥å¢åŠ                â”‚
â”‚  â€¢ "å†¥æƒ³"æ•´ä½“è¡¨ç°å‡è¡¡ï¼Œå¯ä»¥ä½œä¸ºä¹ æƒ¯é“¾çš„æ ¸å¿ƒ         â”‚
â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ç›¸å…³æ€§çƒ­åŠ›å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            ğŸ”— ä¹ æƒ¯ç›¸å…³æ€§çŸ©é˜µ                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                      â”‚
â”‚          æ™¨è·‘   é˜…è¯»   å†¥æƒ³   å­¦è‹±è¯­  å–æ°´           â”‚
â”‚  æ™¨è·‘    1.00   0.32   0.78   0.15   0.45           â”‚
â”‚  é˜…è¯»    0.32   1.00   0.28   0.65   0.22           â”‚
â”‚  å†¥æƒ³    0.78   0.28   1.00   0.18   0.38           â”‚
â”‚  å­¦è‹±è¯­  0.15   0.65   0.18   1.00  -0.05           â”‚
â”‚  å–æ°´    0.45   0.22   0.38  -0.05   1.00           â”‚
â”‚                                                      â”‚
â”‚  é¢œè‰²æ·±åº¦è¡¨ç¤ºç›¸å…³æ€§å¼ºåº¦                              â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ å¼ºæ­£ç›¸å…³ (> 0.7)                             â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆ  ä¸­ç­‰ç›¸å…³ (0.4 - 0.7)                         â”‚
â”‚  â–ˆâ–ˆâ–ˆ   å¼±ç›¸å…³ (0.2 - 0.4)                           â”‚
â”‚  â–ˆâ–ˆ    æ— ç›¸å…³ (< 0.2)                               â”‚
â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ æ–‡ä»¶å˜æ›´æ¸…å•

### æ–°å¢æ–‡ä»¶

```
packages/domain-client/src/habit/
  â”œâ”€â”€ aggregates/HabitAnalytics.ts
  â”œâ”€â”€ aggregates/HabitCorrelation.ts
  â”œâ”€â”€ value-objects/TrendData.ts
  â”œâ”€â”€ value-objects/PerformanceAnalysis.ts
  â”œâ”€â”€ value-objects/RecognizedPattern.ts
  â””â”€â”€ value-objects/Insight.ts

packages/application-client/src/habit/
  â”œâ”€â”€ services/HabitAnalyticsService.ts
  â””â”€â”€ utils/
      â”œâ”€â”€ CorrelationCalculator.ts
      â”œâ”€â”€ TrendPredictor.ts
      â”œâ”€â”€ AnomalyDetector.ts
      â””â”€â”€ PatternRecognizer.ts

apps/desktop/src/renderer/components/habit/analytics/
  â”œâ”€â”€ AnalyticsDashboard.tsx
  â”œâ”€â”€ CompletionTrendChart.tsx
  â”œâ”€â”€ PerformanceCards.tsx
  â”œâ”€â”€ CorrelationMatrix.tsx
  â”œâ”€â”€ HabitRadarChart.tsx
  â”œâ”€â”€ RankingList.tsx
  â”œâ”€â”€ InsightCards.tsx
  â”œâ”€â”€ PatternsList.tsx
  â””â”€â”€ AnalyticsReport.tsx

apps/desktop/src/renderer/hooks/
  â””â”€â”€ useHabitAnalytics.ts

apps/desktop/src/renderer/utils/
  â””â”€â”€ chartHelpers.ts
```

### ä¿®æ”¹æ–‡ä»¶

```
apps/desktop/src/renderer/routes.tsx
  â””â”€â”€ æ·»åŠ ç»Ÿè®¡åˆ†æé¡µé¢è·¯ç”±

apps/desktop/src/renderer/components/habit/HabitDetailPage.tsx
  â””â”€â”€ æ·»åŠ åˆ†ææ ‡ç­¾é¡µ

package.json
  â””â”€â”€ æ·»åŠ å›¾è¡¨åº“: recharts æˆ– chart.js
```

---

## ğŸ§ª æµ‹è¯•è¦ç‚¹

### å•å…ƒæµ‹è¯•

- ç›¸å…³æ€§è®¡ç®—å‡†ç¡®æ€§
- è¶‹åŠ¿é¢„æµ‹ç®—æ³•
- å¼‚å¸¸æ£€æµ‹é€»è¾‘
- æ¨¡å¼è¯†åˆ«å‡†ç¡®æ€§

### é›†æˆæµ‹è¯•

- å¤šä¹ æƒ¯æ•°æ®èšåˆ
- é•¿æœŸå†å²æ•°æ®åˆ†æ
- æ´å¯Ÿç”Ÿæˆé€»è¾‘
- æŠ¥å‘Šç”Ÿæˆå®Œæ•´æ€§

### E2E æµ‹è¯•

- å®Œæ•´åˆ†ææµç¨‹
- å›¾è¡¨äº¤äº’
- æ•°æ®å¯¼å‡º
- æŠ¥å‘Šç”Ÿæˆ

### æ€§èƒ½æµ‹è¯•

- å¤§é‡æ•°æ®ç»Ÿè®¡è®¡ç®—
- å›¾è¡¨æ¸²æŸ“æ€§èƒ½
- ç›¸å…³æ€§çŸ©é˜µè®¡ç®—
- å†…å­˜å ç”¨

---

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **ç»Ÿè®¡å‡†ç¡®æ€§**ï¼šç®—æ³•è¦ä½¿ç”¨ä¸šç•Œæ ‡å‡†ï¼Œç¡®ä¿ç»“æœå¯ä¿¡
2. **æ•°æ®é‡å¤„ç†**ï¼š2å¹´+æ•°æ®è¦ä¼˜åŒ–è®¡ç®—ï¼Œè€ƒè™‘ç¼“å­˜
3. **å¯è§£é‡Šæ€§**ï¼šæ´å¯Ÿè¦æ˜“æ‡‚ï¼Œé¿å…è¿‡äºæŠ€æœ¯åŒ–
4. **éšç§ä¿æŠ¤**ï¼šç»Ÿè®¡æ•°æ®ä»…æœ¬åœ°è®¡ç®—å’Œå­˜å‚¨
5. **æ€§èƒ½ä¼˜åŒ–**ï¼šå¤æ‚å›¾è¡¨è€ƒè™‘å»¶è¿ŸåŠ è½½
6. **ç”¨æˆ·å¼•å¯¼**ï¼šé¦–æ¬¡ä½¿ç”¨æä¾›æ•™ç¨‹ï¼Œå¸®åŠ©ç†è§£å›¾è¡¨
7. **å¯æ“ä½œæ€§**ï¼šæ´å¯Ÿè¦èƒ½è½¬åŒ–ä¸ºå…·ä½“è¡ŒåŠ¨
8. **æ— éšœç¢**ï¼šå›¾è¡¨è¦æä¾›æ–‡å­—æè¿°

---

## ğŸš€ æœªæ¥æ‰©å±•

1. **AI æ·±åº¦åˆ†æ**ï¼šä½¿ç”¨æœºå™¨å­¦ä¹ é¢„æµ‹ä¹ æƒ¯å¤±è´¥é£é™©
2. **å¯¹æ ‡åˆ†æ**ï¼šä¸ç¤¾åŒºå¹³å‡æ°´å¹³å¯¹æ¯”
3. **å¥åº·è¯„åˆ†**ï¼šç»¼åˆè¯„åˆ†å±•ç¤ºæ•´ä½“å¥åº·çŠ¶å†µ
4. **ä¹ æƒ¯æ¨è**ï¼šåŸºäºåˆ†æç»“æœæ¨èæ–°ä¹ æƒ¯
5. **å¹²é¢„å»ºè®®**ï¼šè¯†åˆ«é—®é¢˜å¹¶ç»™å‡ºå…·ä½“æ”¹è¿›æ–¹æ¡ˆ
6. **æ•°æ®å¯¼å‡º**ï¼šå¯¼å‡ºåˆ°ä¸“ä¸šåˆ†æå·¥å…·ï¼ˆR/Pythonï¼‰
7. **è¯­éŸ³æŠ¥å‘Š**ï¼šè¯­éŸ³æ’­æŠ¥æ¯å‘¨/æœˆåº¦åˆ†æ
8. **VR/AR å¯è§†åŒ–**ï¼šæ²‰æµ¸å¼æ•°æ®å¯è§†åŒ–ä½“éªŒ
